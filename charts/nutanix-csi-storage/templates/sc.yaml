{{- if eq .Values.volumeClass true }}
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
    name: nutanix-volume
{{- if or ( eq .Values.defaultStorageClass "volume" ) ( eq .Values.defaultStorageClass "none") }}
    annotations:
        storageclass.kubernetes.io/is-default-class: "true"
{{- end }}
provisioner: com.nutanix.csi
parameters:
    csiProvisionerSecretName: ntnx-secret
    csiProvisionerSecretNamespace: {{ .Release.Namespace }}
    csiNodePublishSecretName: ntnx-secret
    csiNodePublishSecretNamespace: {{ .Release.Namespace }}
    dataServiceEndPoint: {{ .Values.dataServiceEndPoint }}
    storageContainer: {{ .Values.storageContainer }}
    fsType: {{ .Values.fsType }}
{{- end }}
---
{{- if eq .Values.fileClass true }}
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
    name: nutanix-file
{{- if or ( eq .Values.defaultStorageClass "file" ) ( eq .Values.defaultStorageClass "none") }}
    annotations:
        storageclass.kubernetes.io/is-default-class: "true"
{{- end }}
provisioner: com.nutanix.csi
parameters:
    nfsServer: {{ .Values.fileHost }}
    nfsPath: {{ .Values.filePath }}
{{- end }}
